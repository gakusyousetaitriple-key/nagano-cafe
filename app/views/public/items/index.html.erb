<div class="page-layout">
  <!-- 右側の商品一覧 -->
  <div class="main-content">
    <h1 class="page-title">
      商品一覧 (<%= @items.count %>件)
      <% if @genre.present? %>
        <span class="genre-title">（<%= @genre.name %>一覧）</span>
      <% end %>
    </h1>

    <table class="product-table">
      <tbody>
        <% @items.each_with_index do |item, index| %>
          <% if index % 4 == 0 %>
            <tr>
          <% end %>

          <td class="product-item">
            <!-- 商品画像にリンクを追加（顧客用の詳細ページに遷移） -->
            <%= link_to public_item_path(item) do %>
              <% if item.image.attached? %>
                <%= image_tag item.image, alt: item.name, class: "product-image" %>
              <% else %>
                <p>画像がありません</p>
              <% end %>
            <% end %>
            <p><strong><%= item.name %></strong></p>
            <p><%= "¥#{(item.price * 1.1).floor}" %></p>
          </td>

          <% if (index + 1) % 4 == 0 || index == @items.count - 1 %>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>

    <!-- ページネーション -->
    <div class="pagination">
      <%= paginate @items %>
    </div>
  </div>
</div>
